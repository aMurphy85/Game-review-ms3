{% extends "base.html" %}
{% block content %}
        
<div class="row">
    <div class="col s12 m10 l8 offset-l2 offset-m1" id="card">
        <div class="card game-card grey darken-4">
            <div class="card-image">
                <img id="card-image" src="{{ game.game_url }}">
            </div>

            <div class="card-content white-text">
                <div class="row ">                    
                        <div class="col s10 m10 l10 offset-s1 offset-m1 offset-l1">
                            <h3>{{ game.game_title }}</h3>
                        </div>
                </div>

                <div class="row game-info">
                    <div class="col s10 m10 l10 offset-s1 offset-m1 offset-l1">
                        <h5>Game play description:</h5>
                        <p>
                            {{ game.game_description }}
                        </p>
                    </div>
                </div>

                <div class="game-info">
                    <div class="row">
                        <div class="col s10 m6 l6 offset-s1 offset-m1 offset-l1 green lighten-2 light-blue lighten-3">
                            <i class="material-icons">build</i>
                            <p>
                                <strong>Developers:</strong> {{ game.game_developers }}
                            </p>
                        </div>
                        <div class="col s10 m4 l4 offset-s1 grey darken-1">
                            <i class="material-icons">today</i>
                            <p>
                                <strong>Released: {{ game.game_released }}</strong>
                            </p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col s10 m4 l4 offset-s1 offset-m1 offset-l1 deep-purple lighten-3">
                            <i class="material-icons">person</i>
                            <p>
                                <strong>{{ game.num_of_players }}</strong>
                            </p>
                        </div>
                        <div class="col s10 m6 l6 offset-s1 red darken-2">
                            <i class="material-icons">extension</i>
                            <p>
                                <strong>Genre: {{ game.game_genre }}</strong>
                            </p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col s10 m10 l10 offset-s1 offset-m1 offset-l1 light-blue lighten-3">
                            <i class="material-icons">desktop_windows</i>
                            <p>
                                <strong>Platforms:</strong> {{ game.game_platforms }}
                            </p>
                        </div>
                    </div>
                </div>

                
                <div class="row">
                    <div class="col s12 center-align">
                        <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Leave a review</a>
                    </div>
                </div>
                <!-- Modal Structure -->
                <div id="modal1" class="modal col m10 l8 grey darken-4">
                    <div class="modal-content grey darken-4" id="card-panel">

                        <div class="container center-align">
                            <h4 class="white-text">Add review</h4>
                        </div>

                        <div class="col s12 m8 l6 offset-m2 offset-l3 card-image" id="modal-img">
                            <img src="{{ game.game_url }}">
                        </div>

                        <form  method="POST" action="{{ url_for('add_review') }}">
                            <div class="row">
                                <input type="hidden" value="{{ game.game_title }}" name="game_title" />
                                <div class="input-field col s10 m8 l8 offset-s1 offset-m2 offset-l2">                                            
                                    <textarea id="user_review" name="user_review" minlength="5"
                                        maxlength="200" class="materialize-textarea white-text validate" required></textarea>
                                    <label class="white-text" for="user_review">Review</label>
                                </div>
                            </div>
                
                            <!-- Switch -->
                            <div class="row">
                                <div class="input-field col s12 center-align">
                                    <div class="switch">
                                        <p class="white-text"><strong>Recommend this game?</strong></p>
                                        <label class="white-text" for="is_recommended">
                                            <input type="checkbox" id="is_recommended" name="is_recommended">
                                            <span class="lever"></span>
                                            Yes
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12 center-align">
                                    <button class="btn waves-effect red darken-3 submit-btn" type="submit">
                                        Submit Review
                                        <i class="material-icons right">send</i>
                                    </button>
                                </div>
                            </div>
                        </form>

                        <div class="modal-footer grey darken-4">
                            <a href="#!" class="modal-close white-text">Close</a>
                          </div>

                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<div class="row">
    <div class="col s12 m10 l8 offset-l2 offset-m1">
        <h4 class="header white-text">Reviews</h4>
    </div>
</div>

<div class="row">
    <div class="col s12 m10 l8 offset-l2 offset-m1">        
        <div class="card game-card grey darken-4">
            {% for review in reviews %}
                <div class="card-content white-text">
                    <p>{{ review.user_review }}</p>
                    <p>{{ review.created_by }}</p>
                </div>
            {% endfor %}
        </div>
    </div>
</div>

<div class="row center-align">
    <div class="col s12">
        <a class="btn waves-effect red darken-3 back-btn" href="{{ url_for('get_games') }}" type="submit" name="action">
            <i class="material-icons left">arrow_back</i> Back        
        </a>
    </div>
</div>

{% endblock %}
